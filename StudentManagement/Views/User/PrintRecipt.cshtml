@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@model StudentManagement.Models.fee
@{
    ViewBag.Title = "Student - Print Fee Recipt";
    Layout = "_UserLayout";
}

<div class="max-w-5xl mx-auto bg-white shadow-md rounded-lg p-4 text-sm" id="myform">
    <!-- Header -->
    <div class="flex justify-between items-center border-b pb-2 mb-4">
        <div>
            <h1 class="text-2xl font-bold text-gray-800">Genius Coaching Center</h1>
            <p class="text-gray-600 text-xs">Goshaiganj, Ayodhya, Uttar Pradesh, 224141</p>
            <p class="text-gray-600 text-xs">Email: bajrangipatwa459@gmail.com | Phone: +91-9506006286</p>
        </div>
        <div>
            <img src="/images/genius.jpg" class="w-14 h-14" />
        </div>
        <div class="text-right text-xs">
            <p><span class="font-semibold">Date:</span> @DateTime.Now.ToString("dd/MM/yyyy")</p>
            <p><span class="font-semibold">Receipt No:</span> @Model.id</p>
        </div>
    </div>

    <!-- Student Info -->
    <h2 class="text-lg font-semibold mb-2 text-gray-700">Student Information</h2>
    <div class="grid grid-cols-2 gap-2 border p-3 rounded mb-4">
        <p><span class="font-semibold">Student ID: </span>@Model.studentid</p>
        <p><span class="font-semibold">Student Name: </span>@Model.name</p>
        <p><span class="font-semibold">Phone Number: </span>@Model.mobile</p>
        <p><span class="font-semibold">Email: </span>@Model.email</p>
        <p><span class="font-semibold">College: </span>@Model.college</p>
        <p><span class="font-semibold">Qualification: </span>@Model.course</p>
        <p><span class="font-semibold">Year: </span>@Model.training</p>
        @* <p><span class="font-semibold">Course: </span>@Model.regfee</p>
        <p><span class="font-semibold">Duration: </span>@Model.totalfee</p>
        <p><span class="font-semibold">Duration: </span>@Model.duefee</p> *@
        <p><span class="font-semibold">Duration: </span>@Model.amount</p>
        <p><span class="font-semibold">Duration: </span>@Model.paymentid</p>
        <p><span class="font-semibold">Duration: </span>@Model.year</p>
    </div>

    <!-- Payment Info -->
    <h2 class="text-lg font-semibold mb-2 text-gray-700">Payment Details</h2>
    <table class="w-full border mb-4 text-xs">
        <thead class="bg-gray-200">
            <tr>
                <th class="p-1 text-left">Registration Fee</th>
                <th class="p-1 text-left">Total Fee</th>
                <th class="p-1 text-left">Amount To Pay</th>
                <th class="p-1 text-left">Due Fee</th>
                <th class="p-1 text-left">Status</th>
                <th class="p-1 text-left">Payment ID</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="p-1">₹ @Model.regfee</td>
                <td class="p-1">₹ @Model.totalfee</td>
                <td class="p-1">₹ @Model.amount</td>
                <td class="p-1">₹ @Model.duefee</td>
                <td class="p-1">
                    @if (Model.paymentstatus == "Success")
                    {
                        <span class="text-green-600 font-bold">PAID</span>
                    }
                    else
                    {
                        <span class="text-red-600 font-bold">FAILED</span>
                    }
                </td>
                <td class="p-1">@Model.paymentid</td>
            </tr>
        </tbody>
    </table>

    <!-- Footer -->
    <div class="flex justify-between items-center mt-4 text-xs">
        <p class="text-gray-600"><strong>Note:</strong> Fee is not refundable or transferable.</p>
        <div class="text-center">
            <p>Authorized Sign & Stamp</p>
            <div class="border-t mt-4 w-28 mx-auto"><img src="/images/sign.png" /></div>
        </div>
    </div>
</div>

<!-- Print & Download Button -->
<div class="mt-4 text-center">
    <!-- Print & Download Button -->
    <div class="mt-4 text-center mb-4">
        <button onclick="printForm()"
                class="px-4 py-1 bg-blue-600 text-white font-semibold rounded shadow hover:bg-blue-700 transition text-sm">
            Print Receipt
        </button>
        <button onclick="downloadForm()"
                class="px-4 py-1 bg-yellow-600 text-white font-semibold rounded shadow hover:bg-yellow-700 transition text-sm">
            Download Receipt
        </button>
    </div>

    <!-- Add html2pdf CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <script>
        // Download PDF
        function downloadForm() {
            var element = document.getElementById("myform");
            html2pdf().set({
                margin: 0.5,
                filename: 'StudentReceipt.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
            }).from(element).save();
        }

        // Print
        function printForm() {
            // receipt wala div uthao
            var printContent = document.getElementById("myform").innerHTML;

            // original page content store karo
            var originalContent = document.body.innerHTML;

            // body me sirf receipt dikhado
            document.body.innerHTML = printContent;

            // print call karo
            window.print();

            // print ke baad wapas pura page lauta do
            document.body.innerHTML = originalContent;
        }
    </script>
</div>